# Name: ax_ipcheck v0.1 
# Type: Public plugin
# Show parts of a page depending on the client's IP address 
# Author: eliph
# URL: https://github.com/eliph/ax_ipcheck
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEwOiJheF9pcGNoZWNrIjtzOjY6ImF1dGhvciI7czo1OiJl
bGlwaCI7czoxMDoiYXV0aG9yX3VyaSI7czozNToiaHR0cHM6Ly9naXRodWIuY29tL2VsaXBo
L2F4X2lwY2hlY2siO3M6NzoidmVyc2lvbiI7czozOiIwLjEiO3M6MTE6ImRlc2NyaXB0aW9u
IjtzOjU4OiJTaG93IHBhcnRzIG9mIGEgcGFnZSBkZXBlbmRpbmcgb24gdGhlIGNsaWVudCdz
IElQIGFkZHJlc3MgIjtzOjQ6ImNvZGUiO3M6MjQ1OToiLy8gVGhpcyBpcyBhIFBMVUdJTiBU
RU1QTEFURSBmb3IgVGV4dHBhdHRlcm4gQ01TLg0KDQovLyBDb3B5IHRoaXMgZmlsZSB0byBh
IG5ldyBuYW1lIGxpa2UgYWJjX215cGx1Z2luLnBocC4gIEVkaXQgdGhlIGNvZGUsIHRoZW4N
Ci8vIHJ1biB0aGlzIGZpbGUgYXQgdGhlIGNvbW1hbmQgbGluZSB0byBwcm9kdWNlIGEgcGx1
Z2luIGZvciBkaXN0cmlidXRpb246DQovLyAkIHBocCBhYmNfbXlwbHVnaW4ucGhwID4gYWJj
X215cGx1Z2luLTAuMS50eHQNCg0KLy8gUGx1Z2luIG5hbWUgaXMgb3B0aW9uYWwuICBJZiB1
bnNldCwgaXQgd2lsbCBiZSBleHRyYWN0ZWQgZnJvbSB0aGUgY3VycmVudA0KLy8gZmlsZSBu
YW1lLiBQbHVnaW4gbmFtZXMgc2hvdWxkIHN0YXJ0IHdpdGggYSB0aHJlZSBsZXR0ZXIgcHJl
Zml4IHdoaWNoIGlzDQovLyB1bmlxdWUgYW5kIHJlc2VydmVkIGZvciBlYWNoIHBsdWdpbiBh
dXRob3IgKCJhYmMiIGlzIGp1c3QgYW4gZXhhbXBsZSkuDQovLyBVbmNvbW1lbnQgYW5kIGVk
aXQgdGhpcyBsaW5lIHRvIG92ZXJyaWRlOg0KJHBsdWdpblsnbmFtZSddID0gJ2F4X2lwY2hl
Y2snOw0KDQovLyBBbGxvdyByYXcgSFRNTCBoZWxwLCBhcyBvcHBvc2VkIHRvIFRleHRpbGUu
DQovLyAwID0gUGx1Z2luIGhlbHAgaXMgaW4gVGV4dGlsZSBmb3JtYXQsIG5vIHJhdyBIVE1M
IGFsbG93ZWQgKGRlZmF1bHQpLg0KLy8gMSA9IFBsdWdpbiBoZWxwIGlzIGluIHJhdyBIVE1M
LiAgTm90IHJlY29tbWVuZGVkLg0KJHBsdWdpblsnYWxsb3dfaHRtbF9oZWxwJ10gPSAwOw0K
DQokcGx1Z2luWyd2ZXJzaW9uJ10gPSAnMC4xJzsNCiRwbHVnaW5bJ2F1dGhvciddID0gJ2Vs
aXBoJzsNCiRwbHVnaW5bJ2F1dGhvcl91cmknXSA9ICdodHRwczovL2dpdGh1Yi5jb20vZWxp
cGgnOw0KJHBsdWdpblsnZGVzY3JpcHRpb24nXSA9ICdDaGVjayBmb3IgSVAgYWRkcmVzcyBm
b3IgcmVzdHJpY3RlZCBhY2Nlc3MnOw0KDQovLyBQbHVnaW4gbG9hZCBvcmRlcjoNCi8vIFRo
ZSBkZWZhdWx0IHZhbHVlIG9mIDUgd291bGQgZml0IG1vc3QgcGx1Z2lucywgd2hpbGUgZm9y
IGluc3RhbmNlIGNvbW1lbnQNCi8vIHNwYW0gZXZhbHVhdG9ycyBvciBVUkwgcmVkaXJlY3Rv
cnMgd291bGQgcHJvYmFibHkgd2FudCB0byBydW4gZWFybGllcg0KLy8gKDEuLi40KSB0byBw
cmVwYXJlIHRoZSBlbnZpcm9ubWVudCBmb3IgZXZlcnl0aGluZyBlbHNlIHRoYXQgZm9sbG93
cy4NCi8vIFZhbHVlcyA2Li4uOSBzaG91bGQgYmUgY29uc2lkZXJlZCBmb3IgcGx1Z2lucyB3
aGljaCB3b3VsZCB3b3JrIGxhdGUuDQovLyBUaGlzIG9yZGVyIGlzIHVzZXItb3ZlcnJpZGVh
YmxlLg0KJHBsdWdpblsnb3JkZXInXSA9ICc1JzsNCg0KLy8gUGx1Z2luICd0eXBlJyBkZWZp
bmVzIHdoZXJlIHRoZSBwbHVnaW4gaXMgbG9hZGVkDQovLyAwID0gcHVibGljICAgICAgICAg
ICAgICA6IG9ubHkgb24gdGhlIHB1YmxpYyBzaWRlIG9mIHRoZSB3ZWJzaXRlIChkZWZhdWx0
KQ0KLy8gMSA9IHB1YmxpYythZG1pbiAgICAgICAgOiBvbiBib3RoIHRoZSBwdWJsaWMgYW5k
IGFkbWluIHNpZGUNCi8vIDIgPSBsaWJyYXJ5ICAgICAgICAgICAgIDogb25seSB3aGVuIGlu
Y2x1ZGVfcGx1Z2luKCkgb3IgcmVxdWlyZV9wbHVnaW4oKSBpcyBjYWxsZWQNCi8vIDMgPSBh
ZG1pbiAgICAgICAgICAgICAgIDogb25seSBvbiB0aGUgYWRtaW4gc2lkZSAobm8gQUpBWCkN
Ci8vIDQgPSBhZG1pbithamF4ICAgICAgICAgIDogb25seSBvbiB0aGUgYWRtaW4gc2lkZSAo
QUpBWCBzdXBwb3J0ZWQpDQovLyA1ID0gcHVibGljK2FkbWluK2FqYXggICA6IG9uIGJvdGgg
dGhlIHB1YmxpYyBhbmQgYWRtaW4gc2lkZSAoQUpBWCBzdXBwb3J0ZWQpDQokcGx1Z2luWyd0
eXBlJ10gPSAnNSc7DQoNCmlmIChjbGFzc19leGlzdHMoJ1xUZXh0cGF0dGVyblxUYWdcUmVn
aXN0cnknKSkgew0KICBUeHA6OmdldCgnXFRleHRwYXR0ZXJuXFRhZ1xSZWdpc3RyeScpDQog
ICAgLT5yZWdpc3RlcignYXhfaXBjaGVjaycpOw0KfQ0KDQpmdW5jdGlvbiBheF9pcGNoZWNr
KCRhdHRzLCAkdGhpbmc9JzEnKSB7DQogICAgICBleHRyYWN0KGxBdHRzKGFycmF5KA0KICAg
ICAgICAgICdmcm9taXAnID0+ICcnLA0KICAgICAgICAgICd0b2lwJyA9PiAnJw0KICAgICAg
KSwkYXR0cykpOw0KICAgJGlwX2xvdyA9IGlwMmxvbmcoJGZyb21pcCk7DQogICAkaXBfaGln
aCA9IGlwMmxvbmcoJHRvaXApOw0KICAgJHVzZXJfaXAgPSBpcDJsb25nKCRfU0VSVkVSWydS
RU1PVEVfQUREUiddKTsNCiAgLy9jaGVjayBmb3IgYWxsb3dlZCBjbGllbnRzDQogIGlmICgk
dXNlcl9pcD4kaXBfbG93ICYmICR1c2VyX2lwPCRpcF9oaWdoKQ0KICAgIHsNCiAgICAgJHJl
c3VsdCA9IDE7DQogICAgfQ0KICBlbHNlDQogICAgew0KICAgICAkcmVzdWx0ID0gMDsNCiAg
ICB9DQogICByZXR1cm4gcGFyc2UoRXZhbEVsc2UoJHRoaW5nLCRyZXN1bHQpKTsNCiAgICAg
ICAgfQ0KDQoiO3M6NDoidHlwZSI7czoxOiIwIjtzOjU6Im9yZGVyIjtzOjE6IjUiO3M6NToi
ZmxhZ3MiO3M6MToiMCI7czo0OiJoZWxwIjtzOjEyNTM6IjxzdHlsZT4KICAgbGkgY29kZSB7
Zm9udC13ZWlnaHQ6IGJvbGQ7fQogICBwcmUge3BhZGRpbmc6IDAuNWVtIDFlbTsgYmFja2dy
b3VuZDogI2VlZTsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7fQogICBoMSwgaDIsIGgzLCBo
MyBjb2RlIHtmb250LWZhbWlseTogc2Fucy1zZXJpZjsgZm9udC13ZWlnaHQ6IGJvbGQ7fQog
ICBoMSwgaDIsIGgzIHttYXJnaW4tbGVmdDogLTFlbTt9CiAgIGgyLCBoMyB7bWFyZ2luLXRv
cDogMmVtO30KICAgaDEge2ZvbnQtc2l6ZTogM2VtO30KICAgaDIge2ZvbnQtc2l6ZTogMmVt
O30KICAgaDMge2ZvbnQtc2l6ZTogMS41ZW07fQogICBsaSBhIGNvZGUge2ZvbnQtd2VpZ2h0
OiBub3JtYWw7fQogICAucmVxdWlyZWQsIC53YXJuaW5nIHtjb2xvcjpyZWQ7fQogPC9zdHls
ZT4KCjxoMT5heF9pcGNoZWNrPC9oMT4KCjxwPlRoaXMgbGV0cyB5b3Ugc2hvdyBwYXJ0cyBv
ZiBhIHBhZ2Ugb25seSB0byB2aXNpdG9ycyB3aXRoIGFuIGFsbG93ZWQgSVAgcmFuZ2Ugb2Yg
dGhlIGNsaWVudC4gVGVzdGVkIHdpdGggPGEgaHJlZj0iaHR0cHM6Ly90ZXh0cGF0dGVybi5j
b20vIj5UZXh0cGF0dGVybjwvYT4gdjQuNy4yIGFuZCB2NC44LjQuPC9wPgoKPHA+PGEgaHJl
Zj0iaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9lbGlwaC9heF9pcGNoZWNrL21hc3Rlci9heF9p
cGNoZWNrX3YwMTAudHh0Ij48c3BhbiBjbGFzcz0iY2FwcyI+RE9XTkxPQUQ8L3NwYW4+PC9h
PjwvcD4KCjxoMj5UYWdzPC9oMj4KCjxwcmU+PGNvZGU+Jmx0O3R4cDpheF9pcGNoZWNrIGZy
b21pcD0mcXVvdDsuLi4mcXVvdDsgdG9pcD0mcXVvdDsuLi4mcXVvdDsmZ3Q7PC9jb2RlPjwv
cHJlPgoKPGgyPkV4YW1wbGU8L2gyPgoKPHByZT48Y29kZT4mbHQ7dHhwOmF4X2lwY2hlY2sg
ZnJvbWlwPSZxdW90OzE5Mi4xNjguMC4wJnF1b3Q7IHRvaXA9JnF1b3Q7MTkyLjE2OC4yNTUu
MjU1JnF1b3Q7Jmd0OwogICAgSVAgYWRkcmVzcyBpcyBvawombHQ7dHhwOmVsc2UgLyZndDsK
ICAgIElQIGFkZHJlc3MgaXMgbm90IG9rCiZsdDsvdHhwOmF4X2lwY2hlY2smZ3Q7PC9jb2Rl
PjwvcHJlPgoKPGgyPk5vdGVzPC9oMj4KCjxwPklmIG1vcmUgdGhhbiBvbmUgSVAgcmFuZ2Ug
aXMgcmVxdWlyZWQsIHRoZSA8c3BhbiBjbGFzcz0iY2FwcyI+UEhQPC9zcGFuPiBjb2RlIG11
c3QgYmUgY2hhbmdlZC48L3A+Cgo8aDI+VmVyc2lvbiBoaXN0b3J5PC9oMj4KCjxwPjAuMSAm
IzgyMTE7IERlY2VtYmVyIDIwMjA8YnIgLz4KZmlyc3QgcmVsZWFzZS48L3A+IjtzOjM6Im1k
NSI7czozMjoiMzVmMzZiNmY3YzhiMGNmZjE3ZjllMzI2OWE2ODNkODgiO30=
